# --- Switch for backend Influx connectivity ---
# INFLUX_MODE=local   # remote | local

# # --- InfluxDB (common) ---
# INFLUXDB_ORG=SEP_project
# INFLUXDB_BUCKET=group_bucket
# INFLUXDB_TOKEN=tRb41mAjtrAh10CwU_MhkMy8KlImGjWQs3reW6nO_TPPHoedx07IOAQq0gCajlm4CWSoJC2cZrvI1zTk5-jDVA==
# # Backend will read this URL; for remote mode we use the local SSH-forwarded port
# INFLUXDB_URL=http://127.0.0.1:8086

# # --- Grafana ---
# GRAFANA_HOST=127.0.0.1
# GRAFANA_PORT=5000
# # Backend axios client uses this base URL
# # GRAFANA_BASE_URL=http://127.0.0.1:5000
# GRAFANA_ADMIN_USER=admin
# GRAFANA_ADMIN_PASSWORD=UDFno23nr12309asdf

# # --- Remote (SSH tunnel) ---
# SSH_USER=root
# SSH_HOST=139.84.201.140
# SSH_PORT=22
# SSH_KEY_PATH=/Users/lucas/.ssh/id_ed25519        # ‼️‼️‼️‼️‼️‼️‼️‼️‼️ this field is required to be modifed
# REMOTE_INFLUX_HOST=localhost
# REMOTE_INFLUX_PORT=8086
# LOCAL_FORWARD_PORT=8086            # port exposed inside the docker network

# # --- Local EXISTING InfluxDB (no container) ---
# LOCAL_INFLUXDB_SCHEME=http
# LOCAL_INFLUXDB_HOST=127.0.0.1   # on Linux you may need 172.17.0.1
# LOCAL_INFLUXDB_PORT=8086

# # --- Service ports ---
# # PORT=3000
# BACKEND_PORT=3000
# FRONTEND_PORT=5173
# # Allowed origins for dev CORS (frontend)
# CORS_WHITELIST=http://localhost:5173,http://127.0.0.1:5173

# # --- MySQL (new) ---
# MYSQL_HOST=127.0.0.1
# MYSQL_PORT=3306
# MYSQL_DATABASE=sepdb

# # Root user (⚠️ only for administration, don’t use in app code)
# MYSQL_ROOT_USER=root
# MYSQL_ROOT_PASSWORD='iousdafYUAG120894a12'

# # Application user
# MYSQL_USER=sep
# MYSQL_PASSWORD='Usd0923dsfjnk871223'







# new






# =======================
# Global / Compose
# =======================
COMPOSE_PROJECT_NAME=sep_stack
APP_NETWORK=app_network
HOST_IP=127.0.0.1

# =======================
# Host Port Mapping
# =======================
MYSQL_HOST_PORT=3306
GRAFANA_HOST_PORT=5000
# GRAFANA_CONTAINER_PORT=3000
INFLUXDB_HOST_PORT=8086
REDIS_HOST_PORT=6379
BACKEND_PORT=3000
FRONTEND_PORT=5173

# =======================
# Host Paths (volumes)
# =======================
# MySQL
MYSQL_DATA=./mysql/mysql-data
MYSQL_CONFIG=./mysql/mysql-config
MYSQL_LOGS=./mysql/mysql-logs

# Grafana
GRAFANA_DATA=./grafana/grafana-data
GRAFANA_LOGS=./grafana/grafana-logs
GRAFANA_CONFIG=./grafana/grafana-config

# InfluxDB
INFLUXDB_DATA=./influxdb/influxdb-data
INFLUXDB_CONFIG=./influxdb/influxdb-config
INFLUXDB_LOGS=./influxdb/influxdb-logs

# Redis
REDIS_DATA=./redis/redis-data
REDIS_LOGS=./redis/redis-logs
REDIS_BACKUP=./redis/redis-backup
REDIS_CONF_FILE=./redis/redis-config/redis.conf
REDIS_ACL_FILE=./redis/redis-config/users.acl

# =======================
# MySQL Credentials
# (rotate for production)
# =======================
MYSQL_ROOT_PASSWORD=iousdafYUAG120894a12
MYSQL_DATABASE=sepdb
MYSQL_USER=sep
MYSQL_PASSWORD=Usd0923dsfjnk871223

# =======================
# Grafana Settings
# =======================
GF_SECURITY_ALLOW_EMBEDDING=true
GF_AUTH_ANONYMOUS_ENABLED=true
GF_AUTH_ANONYMOUS_ORG_ROLE=Viewer
# If you serve Grafana behind your app at /grafana, keep these:
GF_SERVER_ROOT_URL=http://localhost:5173/grafana/
GF_SERVER_SERVE_FROM_SUB_PATH=true
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=iasdbfiasfni234123

# =======================
# InfluxDB 2.x Init
# =======================
DOCKER_INFLUXDB_INIT_MODE=setup
DOCKER_INFLUXDB_INIT_USERNAME=admin
DOCKER_INFLUXDB_INIT_PASSWORD=UDFno23nr12309asdf
DOCKER_INFLUXDB_INIT_ORG=my-org
DOCKER_INFLUXDB_INIT_BUCKET=default
DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=IUFE324jsdf23oijasdf

# =======================
# Redis
# (you’re using redis.conf + ACL file)
# =======================
REDIS_HEALTHCHECK_INTERVAL=10s
REDIS_HEALTHCHECK_TIMEOUT=5s
REDIS_HEALTHCHECK_RETRIES=10




# --- Node -> Redis (via SSH tunnel) ---
NODE_ENV=production
REDIS_HOST=127.0.0.1         # your local SSH bind
REDIS_PORT=6379
REDIS_USERNAME=session       # matches users.acl
REDIS_PASSWORD=a0009de9a9d0e0871c96833db7d25ee2107e5c976e23aa0fe36e12c58586c900    # the long hash from users.acl # DO NOT commit real secrets to VCS
REDIS_DB=0
REDIS_KEY_PREFIX=app:sess:   # matches your ACL key pattern
REDIS_TLS_ENABLED=false      # true only if you terminate TLS on Redis


# --- Express-session cookie ---
SESSION_NAME=__Host-bif.sid  # forces Secure+Path=/, safer cookies
SESSION_SECRETS=["b3f6f7e7a8b84a7d9c2a0f6d9b0a4e77","7a1b9d3c4f5e6a2b8c0d1e3f9a4b7c2d"]  # rotate: put newest first (replace with your own secrets)
SESSION_COOKIE_MAXAGE_MS=604800000   # 7 days
SESSION_COOKIE_SECURE=false          # set to true in production behind HTTPS
SESSION_COOKIE_SAMESITE=lax
SESSION_ROLLING=true                 # refresh expiry on activity
TRUST_PROXY=1                        # if behind Nginx/Cloudflare/etc.


# --- App URLs / CORS (tighten for prod) ---
BACKEND_PUBLIC_URL=http://localhost:3000
FRONTEND_ORIGIN=http://localhost:5173
CORS_WHITELIST=http://localhost:5173,http://127.0.0.1:5173

# --- CSRF & rate limiting (if you enable them) ---
CSRF_ENABLED=true
CSRF_COOKIE_NAME=__Host-bif.csrf
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=120

# --- Logging & health ---
LOG_LEVEL=info
HEALTH_USER=session              # or a dedicated 'health' user with +ping
HEALTH_KEY_PREFIX=app:sess: